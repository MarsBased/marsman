$input--disabled: .3;
$input--border: 1px solid $secondary-lighter;
$input--border-radius: $border-radius;
$input--padding: .5em 1em;
$input--margin: .5em;
$input--placeholder: rgba($secondary-light,.4);
$input--success: $success;
$input--warning: $warning;

$info-field--fs: $fs-small;

form{
  @include last-margin;
}

.form-group {
  margin-bottom: 1.2em;
  @include last-margin;
}

%input-bg{
  background-repeat: no-repeat;
  background-size: 1em;
  background-position: calc(100% - .5em) center;
  padding-right: 2em;
}

%form-item{
  width: 100%;
  max-width: 100%;
  display: block;
  border: $input--border;
  border-radius: $input--border-radius;
  padding: $input--padding;
  transition: all .2s ease-out;
  margin-bottom: $input--margin;
  background-image: none;
  background-color: white;

  &:focus {
    @include focus;
  }

  &::placeholder {
    color: $input--placeholder;
    opacity: 1; // Override Firefox's unusual default opacity; see https://github.com/twbs/bootstrap/pull/11526
  }

  &:required,
  &.required{
    @extend %input-bg;
    background-image: image-url("icon-required.svg");
  }

  &.success,
  .form-group.success & {
    @extend %input-bg;
    animation: escale10 .5s ease-out;
    border: 1px solid $input--success;
    background-image: image-url("icon-success.svg");

    &:focus{
      @include focus(rgba($input--success,.4));
    }

    + .info-field{
      color: $input--success
    }
  }

  &.warning,
  .form-group.warning &{
    @extend %input-bg;
    animation: escale10 .5s ease-out;
    border: 1px solid $input--warning;
    background-image: image-url("icon-warning.svg");

    &:focus{
      @include focus(rgba($input--warning,.4));
    }

    + .info-field{
      color: $input--warning
    }
  }
}

label {
  display: block;
  max-width: 100%;
  line-height: 1.5em;
  margin-bottom: $input--margin;

  &.required::after{
    content: "*";
    margin-left: .25em;
  }
}

.info-field{
  width: 100%;
  display: block;
  font-size: $info-field--fs;
  margin-bottom: $input--margin;
}


input[disabled]{
  opacity: $input--disabled;
  pointer-events: none;
  + label{
    pointer-events: none;
    opacity: $input--disabled;
  }
}

input {
  @extend %form-item;
}

select {
  @extend %form-item;
  appearance: none;
  background-repeat: no-repeat;
  background-size: 1em;
  background-position: calc(100% - .7em) center;
  padding-right: 2em;
  background-image: image-url("icon-caret-down.svg") !important;
}

textarea {
  @extend %form-item;

  &[maxlength] {
    padding-bottom: 1.5em;
    resize: none;
  }
}

.character-counter{
  position: absolute;
  transform: translate(-100%,-100%);
  display: inline-block;
  pointer-events: none;
  padding: .5em;

  &.success{
    color: $input--success;
  }
  &.warning{
    color: $input--warning;
  }
}